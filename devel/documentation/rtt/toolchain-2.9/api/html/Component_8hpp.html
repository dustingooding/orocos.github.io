<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Orocos Real-Time Toolkit: rtt/Component.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Orocos Real-Time Toolkit
   &#160;<span id="projectnumber">2.9.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b17daf279c0947dd62d31c6271e174bf.html">rtt</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">Component.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the macros and definitions to create dynamically loadable components.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string&gt;</code><br/>
<code>#include &lt;map&gt;</code><br/>
<code>#include &lt;vector&gt;</code><br/>
<code>#include &quot;rtt-fwd.hpp&quot;</code><br/>
<code>#include &quot;rtt-config.h&quot;</code><br/>
</div>
<p><a href="Component_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRTT_1_1ComponentFactories.html">RTT::ComponentFactories</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A global variable storing all component factories added with <em>ORO_LIST_COMPONENT_TYPE</em>.  <a href="classRTT_1_1ComponentFactories.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classRTT_1_1ComponentFactoryLoader.html">RTT::ComponentFactoryLoader&lt; C &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A helper class storing a single component factory in case of static library deployments.  <a href="classRTT_1_1ComponentFactoryLoader.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceRTT"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceRTT.html">RTT</a></td></tr>
<tr class="memdesc:namespaceRTT"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains <a class="el" href="classRTT_1_1TaskContext.html" title="The TaskContext is the C++ representation of an Orocos component. ">TaskContext</a>, <a class="el" href="classRTT_1_1Activity.html" title="An Activity executes a RunnableInterface object in a (periodic) thread. ">Activity</a>, <a class="el" href="classRTT_1_1OperationCaller.html" title="A OperationCaller serves as a placeholder (aka &#39;proxy&#39;) for a remote Operation. ">OperationCaller</a>, <a class="el" href="classRTT_1_1Operation.html" title="The operation ties a C or C++ function into a component interface. ">Operation</a>, <a class="el" href="classRTT_1_1Property.html" title="A property represents a named value of any type with a description. ">Property</a>, <a class="el" href="classRTT_1_1InputPort.html" title="A component&#39;s data input port. ">InputPort</a>, <a class="el" href="classRTT_1_1OutputPort.html" title="A component&#39;s data output port. ">OutputPort</a>, <a class="el" href="classRTT_1_1Attribute.html" title="An Attribute has a name and contains data which can be set and get. ">Attribute</a>. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa98743dd1e71bb59a46c3da8b7c8e818"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa98743dd1e71bb59a46c3da8b7c8e818"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ORO_CONCAT_LINE2</b>(x, y)&#160;&#160;&#160;x##y</td></tr>
<tr class="separator:aa98743dd1e71bb59a46c3da8b7c8e818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef04f54d76dfbfc570705db2f07dd79d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aef04f54d76dfbfc570705db2f07dd79d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ORO_CONCAT_LINE1</b>(x, y)&#160;&#160;&#160;ORO_CONCAT_LINE2(x,y)</td></tr>
<tr class="separator:aef04f54d76dfbfc570705db2f07dd79d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0596fa171666bd48f94d88ad8113548a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0596fa171666bd48f94d88ad8113548a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ORO_CONCAT_LINE</b>(x)&#160;&#160;&#160;ORO_CONCAT_LINE1(x,__LINE__)</td></tr>
<tr class="separator:a0596fa171666bd48f94d88ad8113548a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a058d12a8eaf4056461472a5a0da3cdf1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a058d12a8eaf4056461472a5a0da3cdf1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ORO_LIST_COMPONENT_TYPE_str</b>(s)&#160;&#160;&#160;ORO_LIST_COMPONENT_TYPE__str(s)</td></tr>
<tr class="separator:a058d12a8eaf4056461472a5a0da3cdf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a688364d1d6b32e475bdc594e14744a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a688364d1d6b32e475bdc594e14744a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ORO_LIST_COMPONENT_TYPE__str</b>(s)&#160;&#160;&#160;#s</td></tr>
<tr class="separator:a1a688364d1d6b32e475bdc594e14744a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c394cfbb02f00290c88f2a9bf86ceac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Component_8hpp.html#a3c394cfbb02f00290c88f2a9bf86ceac">ORO_CREATE_COMPONENT</a>(CNAME)</td></tr>
<tr class="memdesc:a3c394cfbb02f00290c88f2a9bf86ceac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this macro to register a single component in a shared library (plug-in).  <a href="#a3c394cfbb02f00290c88f2a9bf86ceac">More...</a><br/></td></tr>
<tr class="separator:a3c394cfbb02f00290c88f2a9bf86ceac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7698aa87b094f15fe48825ee27dfe619"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Component_8hpp.html#a7698aa87b094f15fe48825ee27dfe619">ORO_CREATE_COMPONENT_LIBRARY</a>()</td></tr>
<tr class="memdesc:a7698aa87b094f15fe48825ee27dfe619"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this macro to create a component library which contains all components listed with ORO_LIST_COMPONENT_TYPE.  <a href="#a7698aa87b094f15fe48825ee27dfe619">More...</a><br/></td></tr>
<tr class="separator:a7698aa87b094f15fe48825ee27dfe619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1fecb579cec7c96e9179536e22a3813"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Component_8hpp.html#ae1fecb579cec7c96e9179536e22a3813">ORO_LIST_COMPONENT_TYPE</a>(CLASS_NAME)&#160;&#160;&#160;namespace { namespace ORO_CONCAT_LINE(LOADER_) { <a class="el" href="classRTT_1_1ComponentFactoryLoader.html">RTT::ComponentFactoryLoader</a>&lt;CLASS_NAME&gt; m_cloader(ORO_LIST_COMPONENT_TYPE_str(CLASS_NAME)); } }</td></tr>
<tr class="memdesc:ae1fecb579cec7c96e9179536e22a3813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use this macro to register multiple components in a shared library (plug-in).  <a href="#ae1fecb579cec7c96e9179536e22a3813">More...</a><br/></td></tr>
<tr class="separator:ae1fecb579cec7c96e9179536e22a3813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0acfd10dbbc121e1a48026e704ae808"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0acfd10dbbc121e1a48026e704ae808"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Component_8hpp.html#aa0acfd10dbbc121e1a48026e704ae808">ORO_CREATE_COMPONENT_TYPE</a>()&#160;&#160;&#160;<a class="el" href="Component_8hpp.html#a7698aa87b094f15fe48825ee27dfe619">ORO_CREATE_COMPONENT_LIBRARY</a>( )</td></tr>
<tr class="memdesc:aa0acfd10dbbc121e1a48026e704ae808"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backwards compatibility macro which is now replaced by <a class="el" href="Component_8hpp.html#a7698aa87b094f15fe48825ee27dfe619" title="Use this macro to create a component library which contains all components listed with ORO_LIST_COMPO...">ORO_CREATE_COMPONENT_LIBRARY( )</a> <br/></td></tr>
<tr class="separator:aa0acfd10dbbc121e1a48026e704ae808"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3ae509ae0e8187d05670f4e57b6a8d0e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3ae509ae0e8187d05670f4e57b6a8d0e"></a>
typedef TaskContext *(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceRTT.html#a3ae509ae0e8187d05670f4e57b6a8d0e">RTT::ComponentLoaderSignature</a> )(std::string instance_name)</td></tr>
<tr class="memdesc:a3ae509ae0e8187d05670f4e57b6a8d0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This signature defines how a component can be instantiated. <br/></td></tr>
<tr class="separator:a3ae509ae0e8187d05670f4e57b6a8d0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c3c6a2dee2942c4196e0df2e098a98"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae7c3c6a2dee2942c4196e0df2e098a98"></a>
typedef std::map&lt; std::string, <br class="typebreak"/>
ComponentLoaderSignature &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>RTT::FactoryMap</b></td></tr>
<tr class="separator:ae7c3c6a2dee2942c4196e0df2e098a98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the macros and definitions to create dynamically loadable components. </p>
<p>You need to include this header and use one of the macros if you wish to make a run-time loadable component. </p>

<p>Definition in file <a class="el" href="Component_8hpp_source.html">Component.hpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a3c394cfbb02f00290c88f2a9bf86ceac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ORO_CREATE_COMPONENT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CNAME</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> { \</div>
<div class="line">  RTT_EXPORT <a class="code" href="classRTT_1_1TaskContext.html">RTT::TaskContext</a>* createComponent(std::string instance_name); \</div>
<div class="line">  RTT::TaskContext* createComponent(std::string instance_name) \</div>
<div class="line">  { \</div>
<div class="line">    return <span class="keyword">new</span> CNAME(instance_name); \</div>
<div class="line">  } \</div>
<div class="line">  RTT_EXPORT std::string getComponentType(); \</div>
<div class="line">  std::string getComponentType() \</div>
<div class="line">  { \</div>
<div class="line">    return ORO_LIST_COMPONENT_TYPE_str(CNAME); \</div>
<div class="line">  } \</div>
<div class="line">} <span class="comment">/* extern &quot;C&quot; */</span></div>
<div class="ttc" id="classRTT_1_1TaskContext_html"><div class="ttname"><a href="classRTT_1_1TaskContext.html">RTT::TaskContext</a></div><div class="ttdoc">The TaskContext is the C++ representation of an Orocos component. </div><div class="ttdef"><b>Definition:</b> <a href="TaskContext_8hpp_source.html#l00093">TaskContext.hpp:93</a></div></div>
</div><!-- fragment -->
<p>Use this macro to register a single component in a shared library (plug-in). </p>
<p>You can only use this macro <b>once</b> in a .cpp file for the whole shared library <b>and</b> you may <b>not</b> link with another component library when using this macro. Use ORO_CREATE_COMPONENT_LIBRARY if you are in that situation.</p>
<p>It adds a function 'createComponent', which will return a new instance of the library's component type and a function 'getComponentType', which returns the type (namespace::class) name of the component.</p>
<p>The advantage of this approach is that the user does not need to know the class name of the component, he just needs to locate the shared library itself. The disadvantage is that only one component <em>type</em> per shared library can be created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CNAME</td><td>the class name of the component you are adding to the library. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Component_8hpp_source.html#l00129">129</a> of file <a class="el" href="Component_8hpp_source.html">Component.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7698aa87b094f15fe48825ee27dfe619"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ORO_CREATE_COMPONENT_LIBRARY</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">RTT::FactoryMap* RTT::ComponentFactories::Factories = 0;    \</div>
<div class="line">extern <span class="stringliteral">&quot;C&quot;</span> { \</div>
<div class="line">  RTT_EXPORT <a class="code" href="classRTT_1_1TaskContext.html">RTT::TaskContext</a>* createComponentType(std::string instance_name, std::string type_name) \</div>
<div class="line">  { \</div>
<div class="line">    if( RTT::ComponentFactories::Instance().count(type_name) ) \</div>
<div class="line">      return RTT::ComponentFactories::Instance()[type_name](instance_name); \</div>
<div class="line">    return 0; \</div>
<div class="line">  } \</div>
<div class="line">  RTT_EXPORT std::vector&lt;std::string&gt; getComponentTypeNames() \</div>
<div class="line">  { \</div>
<div class="line">    std::vector&lt;std::string&gt; ret; \</div>
<div class="line">    RTT::FactoryMap::iterator it; \</div>
<div class="line">    for(it = RTT::ComponentFactories::Instance().begin(); it != RTT::ComponentFactories::Instance().end(); ++it) { \</div>
<div class="line">        ret.push_back(it-&gt;first); \</div>
<div class="line">    } \</div>
<div class="line">    return ret; \</div>
<div class="line">  } \</div>
<div class="line">  RTT_EXPORT RTT::FactoryMap* getComponentFactoryMap() { <span class="keywordflow">return</span> &amp;RTT::ComponentFactories::Instance(); } \</div>
<div class="line">} <span class="comment">/* extern &quot;C&quot; */</span></div>
<div class="ttc" id="classRTT_1_1TaskContext_html"><div class="ttname"><a href="classRTT_1_1TaskContext.html">RTT::TaskContext</a></div><div class="ttdoc">The TaskContext is the C++ representation of an Orocos component. </div><div class="ttdef"><b>Definition:</b> <a href="TaskContext_8hpp_source.html#l00093">TaskContext.hpp:93</a></div></div>
</div><!-- fragment -->
<p>Use this macro to create a component library which contains all components listed with ORO_LIST_COMPONENT_TYPE. </p>
<p>It will add to your library an extern "C" function 'createComponentType' which can create a component of each class added with ORO_LIST_COMPONENT_TYPE. </p>

<p>Definition at line <a class="el" href="Component_8hpp_source.html#l00150">150</a> of file <a class="el" href="Component_8hpp_source.html">Component.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae1fecb579cec7c96e9179536e22a3813"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ORO_LIST_COMPONENT_TYPE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CLASS_NAME</td><td>)</td>
          <td>&#160;&#160;&#160;namespace { namespace ORO_CONCAT_LINE(LOADER_) { <a class="el" href="classRTT_1_1ComponentFactoryLoader.html">RTT::ComponentFactoryLoader</a>&lt;CLASS_NAME&gt; m_cloader(ORO_LIST_COMPONENT_TYPE_str(CLASS_NAME)); } }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use this macro to register multiple components in a shared library (plug-in). </p>
<p>For each component, add this line in the .cpp file. Use this macro in combination with ORO_CREATE_COMPONENT_LIBRARY.</p>
<p>The advantage of this approach is that one library can create different component <em>types</em> and that you may link multiple component libraries with each other.</p>
<p>This macro can be used for both shared and static libraries. In case of a shared library, the component factory will be registered to the shared library's local FactoryMap. In case of a static library, the component factory will be registered in the static library's global FactoryMap. In both cases, the DeploymentComponent can access these factories and create the registered component types.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CLASS_NAME</td><td>the class name of the component you are adding to the library. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Component_8hpp_source.html#l00204">204</a> of file <a class="el" href="Component_8hpp_source.html">Component.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 29 2016 12:43:52 for Orocos Real-Time Toolkit by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
